{% extends "base.html" %}

{% block title %}카테고리 관리 - APS 준비도 진단{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>평가 영역(카테고리) 관리</h2>
    <a href="{{ url_for('questions') }}" class="btn btn-secondary">문항 관리로</a>
</div>

<div class="card">
    <div class="card-body">
        <table class="table table-hover">
            <thead class="table-dark">
                <tr>
                    <th>순서</th>
                    <th>영역명</th>
                    <th>가중치</th>
                    <th>설명</th>
                    <th>문항수</th>
                    <th>작업</th>
                </tr>
            </thead>
            <tbody>
                {% for category in categories %}
                <tr>
                    <td>{{ category[4] }}</td>
                    <td><strong>{{ category[1] }}</strong></td>
                    <td>{{ (category[2] * 100)|int }}%</td>
                    <td class="text-muted">{{ category[3] }}</td>
                    <td><span class="badge bg-info">{{ category[5] }}개</span></td>
                    <td>
                        <a href="{{ url_for('edit_category', category_id=category[0]) }}" 
                           class="btn btn-sm btn-outline-primary">수정</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="alert alert-info mt-4">
    <strong>참고:</strong> 카테고리의 가중치 합계는 1.0(100%)이 되어야 합니다.
    현재 합계: <strong>{{ "%.0f"|format((categories|sum(attribute=2)) * 100) }}%</strong>
</div>
{% endblock %}
